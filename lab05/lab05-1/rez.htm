<head><meta charset="UTF-8"></head>
<table height="190" cellpadding="0" cellspacing="1" border="0">
  <tr valign="bottom" width="100" align="center">
    <td bgcolor="#aaaaaa" height="150">
      <img src="1x1.gif" width="110" height="0" border="0" />
    </td>
    <td bgcolor="#aaaaaa" height="150">
      <img src="1x1.gif" width="110" height="0" border="0" />
    </td>
    <td bgcolor="#aaaaaa" height="150">
      <img src="1x1.gif" width="110" height="0" border="0" />
    </td>
    <td bgcolor="#aaaaaa" height="150">
      <img src="1x1.gif" width="110" height="0" border="0" />
    </td>
  </tr>
  <tr valign="top" align="center" width="100">
    <td height="40"><small>Отличники</small></td>
    <td height="40"><small>Хорошо успевающие</small></td>
    <td height="40"><small>Успевающие</small></td>
    <td height="40"><small>Не успевающие</small></td>
  </tr>
</table>

<button onclick="graph()">Вычислить</button>
<script>
  const students = [
    {
      fio: "student1",
      matematika: 5,
      russkii: 5,
    },
    {
      fio: "student2",
      matematika: 5,
      russkii: 4,
    },
    {
      fio: "student3",
      matematika: 4,
      russkii: 5,
    },
    {
      fio: "student4",
      matematika: 5,
      russkii: 3,
    },
    {
      fio: "student5",
      matematika: 5,
      russkii: 5,
    },
    {
      fio: "student6",
      matematika: 5,
      russkii: 2,
    },
    {
      fio: "student7",
      matematika: 5,
      russkii: 2,
    },
    {
      fio: "student8",
      matematika: 5,
      russkii: 5,
    },
    {
      fio: "student9",
      matematika: 5,
      russkii: 3,
    },
    {
      fio: "student10",
      matematika: 4,
      russkii: 4,
    },
  ];

  function onMatChange(index, e) {
    students[index].matematika = +e.target.value;
  }
  function onRusChange(index, e) {
    students[index].russkii = +e.target.value;
  }

  function graph() {
    const otlichniki = students.filter(
      (x) => x.matematika === 5 && x.russkii === 5
    ).length;
    const horoshoUsp = students.filter(
      (x) =>
        x.matematika >= 4 &&
        x.russkii >= 4 &&
        !(x.matematika === 5 && x.russkii === 5)
    ).length;
    const usp = students.filter(
      (x) =>
        (x.matematika === 3 || x.russkii === 3) &&
        !(x.matematika <= 2 || x.russkii <= 2)
    ).length;
    const neUsp = students.filter((x) => x.matematika === 2 || x.russkii === 2)
      .length;
    document.images[0].height = Math.round(otlichniki * 15);
    document.images[1].height = Math.round(horoshoUsp * 15);
    document.images[2].height = Math.round(usp * 15);
    document.images[3].height = Math.round(neUsp * 15);
  }

  document.write(`
        <table border="1">
            <tr>
                <th>ФИО</th>
                <th>Математика</th>
                <th>Русский</th>
            </tr>
        ${students.map(
          (x, index) => `
            <tr>
                <td><input type="text" value="${x.fio}"/></td>
                <td><input type="text" value="${x.matematika}" oninput="onMatChange(${index}, event)"/></td>
                <td><input type="text" value="${x.russkii}" oninput="onRusChange(${index}, event)"/></td>
            </tr>`
        ).join('')}
        </table>

    `);
</script>
